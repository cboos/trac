version: '{branch}.{build}'
clone_depth: 20
init:
- ps: iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
environment:
  matrix:
  - SVN_BRANCH: 1.0-stable
    PYTHONHOME: C:\Python27
    TRAC_TEST_DB_URI:
  - SVN_BRANCH: 1.0-stable
    PYTHONHOME: C:\Python27-x64
    TRAC_TEST_DB_URI: sqlite:test.db
  - SVN_BRANCH: 1.0-stable
    PYTHONHOME: C:\Python26
    TRAC_TEST_DB_URI: sqlite:test.db
  - SVN_BRANCH: 1.0-stable
    PYTHONHOME: C:\Python26-x64
    TRAC_TEST_DB_URI:
  - SVN_BRANCH: 1.0-stable
    PYTHONHOME: C:\Miniconda
    TRAC_TEST_DB_URI: mysql://tracuser:password@localhost/trac
  - SVN_BRANCH: 1.0-stable
    PYTHONHOME: C:\Miniconda-x64
    TRAC_TEST_DB_URI: postgres://tracuser:password@localhost/trac?schema=tractest
services:
- mysql56
- postgresql93
install:
- ps: >-
    . .\contrib\appveyor.ps1

    Trac-Install
cache: C:\projects\dependencies
build_script:
- ps: >-
    . .\contrib\appveyor.ps1

    Trac-Build
test_script:
- ps: >-
    . .\contrib\appveyor.ps1

    Trac-Tests
on_finish:
- ps: $blockRdp = $true

{# Copyright (C) 2006-2014 Edgewall Software

This software is licensed as described in the file COPYING, which
you should have received as part of this distribution. The terms
are also available at http://trac.edgewall.com/license.html.

This software consists of voluntary contributions made by many
individuals. For the exact contribution history, see the revision
history and logs, available at http://trac.edgewall.org/.
#}

# extends 'jlayout.html'

<!DOCTYPE html>
<html>
  <head>
    # block head

    ${ super() }

    <title>{{ if query }}Search Results{{ else }}Search{{ endif }}</title>
    #   if results:
    <meta name="startIndex" content="${results.span[0] + 1}"/>
    <meta name="totalResults" content="${results.num_items}"/>
    <meta name="itemsPerPage" content="${results.max_per_page}"/>
    #   endif

    # endblock head
  </head>

  <body>
    # block content
    <div id="content" class="search">

      <h1><label for="q">Search</label></h1>
      <form id="fullsearch" action="${href.search()}" method="get">
        <p>
          <input type="text" id="q" name="q" class="trac-autofocus" size="40"
                 ${{'value': query}|xmlattr} />
          <input type="hidden" name="noquickjump" value="1" />
          <input type="submit" value="${_('Search')}" />
        </p>
        <p class="filters">
          # for filter in filters:
          <input type="checkbox" id="${filter.name}" name="${filter.name}"
                 ${{'checked': 'checked' if filter.active}|xmlattr} />
          <label for="${filter.name}">${filter.label}</label>
          # endfor
        </p>
      </form>

      # if results or quickjump:
      <hr />
      #   if results:
      <h2>
        Results <span class="numresults">(${results.displayed_items()})</span>
      </h2>
      #   endif

      #   with paginator = results
      #     include 'jpage_index.html'

      <div>
        <dl id="results">
          # if quickjump:
          <dt id="quickjump">
            # trans name = quickjump.name
            <a href="${quickjump.href}">Quickjump to ${name}</a>
            # endtrans
          </dt>
          <dd>${quickjump.description}</dd>
          # endif
          # for result in results:
          <dt><a href="${result.href}"
                 class="searchable">${result.title}</a></dt>
          <dd class="searchable">${result.excerpt}</dd>
          #   if result.author:
          <dd>
            #     trans author = authorinfo(result.author), date = result.date
            By ${author} &mdash; <span class="date">${date}</span>
            #     endtrans
          </dd>
          #   else:
          <dd><span class="date">${result.date}</span></dd>
          #   endif
          # endfor
        </dl>
      </div>

      #     include 'jpage_index.html'
      #   endwith

      # elif query:
      <div id="notfound">
        No matches found.
      </div>
      # endif

      <div id="help">
        # trans
        <strong>Note:</strong>
        See <a href="${href.wiki('TracSearch')}">TracSearch</a>
        for help on searching.
        # endtrans
      </div>

    </div>
    # endblock content
  </body>
</html>

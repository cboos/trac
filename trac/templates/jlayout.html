# extends ('j' + chrome.theme)
<html>
  <head>
    # block head
    #   if chrome.content_type == 'text/html'
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    #   endif

    #   for meta in chrome.metas:
    <meta ${meta|xmlattr} />
    #   endfor

    <!--[if IE]><script type="text/javascript">
        if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
        </script><![endif]-->

    #   if 'links' in chrome:
    #     for rel, links in chrome.links.items():
    #       for link in links:
    <link rel="${rel}" ${link|xmlattr} />
    #       endfor
    #     endfor
    #   endif

    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
    #   if trac_error_rendering is undefined and 'SEARCH_VIEW' in perm:
    <link type="application/opensearchdescription+xml" rel="search"
          href="${href.search('opensearch')}"
          title="${_('Search %(project)s', project=project.name)}"/>
    #   endif

    #   for key, value in chrome.script_data.iteritems():
    #     if chrome.script_data:
    <script type="text/javascript">
      var ${key}=${to_json(value)};
    </script>
    #     endif
    #   endfor

    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
      $(".trac-close-msg").show().click(function () {
      $(this).closest(".system-message").hide();
      return false;
      });
      $(".trac-autofocus").focus();
      $(".trac-target-new").attr("target", "_blank");
      if ($.ui) { /* is jquery-ui added? */
      $(".trac-datepicker:not([readonly])").prop("autocomplete", "off").datepicker();
      $(".trac-datetimepicker:not([readonly])").prop("autocomplete", "off").datetimepicker();
      $("#main").addClass("trac-nodatetimehint");
      }
      $(".trac-disable").disableSubmit(".trac-disable-determinant");
      setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
      $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
    #   include 'site_head.html' ignore missing
    # endblock head
  </head>

  <body>
    # block body

    ${ super() }

    #   if 'alternate' in chrome.links:
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        # for idx, link in enumerate(chrome.links.alternate):
        <li class="${first_last(idx, chrome.links.alternate)}">
          <a rel="nofollow" href="${link.href}" class="${link.class}">
            ${link.title}</a>
        </li>
        # endfor
      </ul>
    </div>
    #   endif
    #   include 'site_body.html' ignore missing
    # endblock body
  </body>
</html>
